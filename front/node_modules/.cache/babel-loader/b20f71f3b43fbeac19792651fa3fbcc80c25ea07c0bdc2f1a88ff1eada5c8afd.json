{"ast":null,"code":"// ...existing code...\n\nconst handleSubmit = async e => {\n  e.preventDefault();\n\n  // Create FormData object to handle file uploads\n  const submitFiles = new FormData();\n  submitFiles.append('attachmentDoc', formData.document);\n  submitFiles.append('userImage', formData.photo);\n  try {\n    // First, upload the files\n    const fileUploadResponse = await axios.post('https://babralaapi-d3fpaphrckejgdd5.centralindia-01.azurewebsites.net/auth/submitFiles', submitFiles, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    console.log('File Upload Response:', fileUploadResponse.data);\n    if (fileUploadResponse.data.success) {\n      // If file upload is successful, submit the complaint\n      const submitComplaint = {\n        colony: 'Colony 1A',\n        complaintStatus: 'Open',\n        complaintType: formData.complaintType,\n        createdBy: 'user',\n        createdDate: new Date().toISOString(),\n        description: formData.description,\n        ipAddress: '49.36.186.235',\n        isAdmin: undefined,\n        locality: 'Locality Ward 1',\n        localityID: 1,\n        location: formData.geoLocation,\n        mobileNumber: formData.mobile,\n        userID: formData.userId,\n        zone: 'North',\n        zoneID: 1,\n        documentUrl: fileUploadResponse.data.attachmentDocUrl,\n        photoUrl: fileUploadResponse.data.userImageUrl\n      };\n      const complaintResponse = await axios.post('https://babralaapi-d3fpaphrckejgdd5.centralindia-01.azurewebsites.net/auth/complaints', submitComplaint, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Complaint Response:', complaintResponse.data);\n      if (complaintResponse.data.success) {\n        // Show success notification\n        setNotification();\n        // Navigate to Home page with userId\n        navigate('/Home', {\n          state: {\n            userId: formData.userId\n          }\n        });\n      } else {\n        console.error('Error:', complaintResponse.data.message);\n      }\n    } else {\n      console.error('File Upload Error:', fileUploadResponse.data.message);\n    }\n  } catch (error) {\n    console.error('Error during complaint submission:', error);\n  }\n};\n\n// ...existing code...","map":{"version":3,"names":["handleSubmit","e","preventDefault","submitFiles","FormData","append","formData","document","photo","fileUploadResponse","axios","post","headers","console","log","data","success","submitComplaint","colony","complaintStatus","complaintType","createdBy","createdDate","Date","toISOString","description","ipAddress","isAdmin","undefined","locality","localityID","location","geoLocation","mobileNumber","mobile","userID","userId","zone","zoneID","documentUrl","attachmentDocUrl","photoUrl","userImageUrl","complaintResponse","setNotification","navigate","state","error","message"],"sources":["C:/ComplainBHNA/front/src/components/complainSubmit.js"],"sourcesContent":["// ...existing code...\r\n\r\nconst handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n\r\n  // Create FormData object to handle file uploads\r\n  const submitFiles = new FormData();\r\n  submitFiles.append('attachmentDoc', formData.document);\r\n  submitFiles.append('userImage', formData.photo);\r\n\r\n  try {\r\n    // First, upload the files\r\n    const fileUploadResponse = await axios.post(\r\n      'https://babralaapi-d3fpaphrckejgdd5.centralindia-01.azurewebsites.net/auth/submitFiles',\r\n      submitFiles,\r\n      {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      }\r\n    );\r\n\r\n    console.log('File Upload Response:', fileUploadResponse.data);\r\n\r\n    if (fileUploadResponse.data.success) {\r\n      // If file upload is successful, submit the complaint\r\n      const submitComplaint = {\r\n        colony: 'Colony 1A',\r\n        complaintStatus: 'Open',\r\n        complaintType: formData.complaintType,\r\n        createdBy: 'user',\r\n        createdDate: new Date().toISOString(),\r\n        description: formData.description,\r\n        ipAddress: '49.36.186.235',\r\n        isAdmin: undefined,\r\n        locality: 'Locality Ward 1',\r\n        localityID: 1,\r\n        location: formData.geoLocation,\r\n        mobileNumber: formData.mobile,\r\n        userID: formData.userId,\r\n        zone: 'North',\r\n        zoneID: 1,\r\n        documentUrl: fileUploadResponse.data.attachmentDocUrl,\r\n        photoUrl: fileUploadResponse.data.userImageUrl,\r\n      };\r\n\r\n      const complaintResponse = await axios.post(\r\n        'https://babralaapi-d3fpaphrckejgdd5.centralindia-01.azurewebsites.net/auth/complaints',\r\n        submitComplaint,\r\n        {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      );\r\n\r\n      console.log('Complaint Response:', complaintResponse.data);\r\n\r\n      if (complaintResponse.data.success) {\r\n        // Show success notification\r\n        setNotification();\r\n        // Navigate to Home page with userId\r\n        navigate('/Home', { state: { userId: formData.userId } });\r\n      } else {\r\n        console.error('Error:', complaintResponse.data.message);\r\n      }\r\n    } else {\r\n      console.error('File Upload Error:', fileUploadResponse.data.message);\r\n    }\r\n  } catch (error) {\r\n    console.error('Error during complaint submission:', error);\r\n  }\r\n};\r\n\r\n// ...existing code..."],"mappings":"AAAA;;AAEA,MAAMA,YAAY,GAAG,MAAOC,CAAC,IAAK;EAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;;EAElB;EACA,MAAMC,WAAW,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAClCD,WAAW,CAACE,MAAM,CAAC,eAAe,EAAEC,QAAQ,CAACC,QAAQ,CAAC;EACtDJ,WAAW,CAACE,MAAM,CAAC,WAAW,EAAEC,QAAQ,CAACE,KAAK,CAAC;EAE/C,IAAI;IACF;IACA,MAAMC,kBAAkB,GAAG,MAAMC,KAAK,CAACC,IAAI,CACzC,wFAAwF,EACxFR,WAAW,EACX;MACES,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CACF,CAAC;IAEDC,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEL,kBAAkB,CAACM,IAAI,CAAC;IAE7D,IAAIN,kBAAkB,CAACM,IAAI,CAACC,OAAO,EAAE;MACnC;MACA,MAAMC,eAAe,GAAG;QACtBC,MAAM,EAAE,WAAW;QACnBC,eAAe,EAAE,MAAM;QACvBC,aAAa,EAAEd,QAAQ,CAACc,aAAa;QACrCC,SAAS,EAAE,MAAM;QACjBC,WAAW,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;QACrCC,WAAW,EAAEnB,QAAQ,CAACmB,WAAW;QACjCC,SAAS,EAAE,eAAe;QAC1BC,OAAO,EAAEC,SAAS;QAClBC,QAAQ,EAAE,iBAAiB;QAC3BC,UAAU,EAAE,CAAC;QACbC,QAAQ,EAAEzB,QAAQ,CAAC0B,WAAW;QAC9BC,YAAY,EAAE3B,QAAQ,CAAC4B,MAAM;QAC7BC,MAAM,EAAE7B,QAAQ,CAAC8B,MAAM;QACvBC,IAAI,EAAE,OAAO;QACbC,MAAM,EAAE,CAAC;QACTC,WAAW,EAAE9B,kBAAkB,CAACM,IAAI,CAACyB,gBAAgB;QACrDC,QAAQ,EAAEhC,kBAAkB,CAACM,IAAI,CAAC2B;MACpC,CAAC;MAED,MAAMC,iBAAiB,GAAG,MAAMjC,KAAK,CAACC,IAAI,CACxC,uFAAuF,EACvFM,eAAe,EACf;QACEL,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CACF,CAAC;MAEDC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAE6B,iBAAiB,CAAC5B,IAAI,CAAC;MAE1D,IAAI4B,iBAAiB,CAAC5B,IAAI,CAACC,OAAO,EAAE;QAClC;QACA4B,eAAe,CAAC,CAAC;QACjB;QACAC,QAAQ,CAAC,OAAO,EAAE;UAAEC,KAAK,EAAE;YAAEV,MAAM,EAAE9B,QAAQ,CAAC8B;UAAO;QAAE,CAAC,CAAC;MAC3D,CAAC,MAAM;QACLvB,OAAO,CAACkC,KAAK,CAAC,QAAQ,EAAEJ,iBAAiB,CAAC5B,IAAI,CAACiC,OAAO,CAAC;MACzD;IACF,CAAC,MAAM;MACLnC,OAAO,CAACkC,KAAK,CAAC,oBAAoB,EAAEtC,kBAAkB,CAACM,IAAI,CAACiC,OAAO,CAAC;IACtE;EACF,CAAC,CAAC,OAAOD,KAAK,EAAE;IACdlC,OAAO,CAACkC,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;EAC5D;AACF,CAAC;;AAED","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}